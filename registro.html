<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tails Up - Registro</title>
    <link rel="stylesheet" href="css/mystyleregistro.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="login-box">
            <div class="logo">
                <img src="images/logo.png" alt="Tails Up">
            </div>
            <button class="google-btn">
                <img src="images/google-icon.png" alt="Google"> Registrarse con Google
            </button>
            <div class="divider">Registra tus datos</div>
            <form id="registroForm">
                <div class="input-group">
                    <img src="images/user-icon.png" alt="User">
                    <input type="text" placeholder="Nombre" required name="nombre">
                </div>
                <div class="input-group">
                    <img src="images/email-icon.png" alt="Email">
                    <input type="email" placeholder="Email" required name="email">
                </div>
                <div class="input-group">
                    <img src="images/lock-icon.png" alt="Contraseña">
                    <input type="password" placeholder="Contraseña" required name="contrasena">
                </div>
                <button name="btnRegistro" type="submit" class="login-btn">Registrar</button>
            </form>
            <p class="register">¿Ya tienes una cuenta? <a href="login.html">Iniciar sesión</a></p>
        </div>
        <div class="info-box">
            <div class="paw-icons">
                <img src="images/patita.png" class="huella1">
                <img src="images/patita.png" class="huella2">
            </div>
            <img src="images/mascota.png" alt="Mujer con perro" class="info-img">

            <h2>Un sitio para tu mascota</h2>
            <p>Esto es un placeholder del texto que pondremos en esta sección
                Esto es un placeholder del texto que pondremos en esta sección
                Esto es un placeholder del texto que pondremos en esta sección
            </p>
        </div>
    </div> 
    <script>
        document.getElementById('registroForm').addEventListener('submit', async function (e) {
    e.preventDefault();
    const formData = new FormData(e.target);

    try {
        const response = await fetch('http://localhost/TailsUp-Backend/endPointRegistro.php', {
            method: 'POST',
            body: formData
        });

        const result = await response.json();

        if (result.success) {
            localStorage.setItem('usuario', result.nombre);
            window.location.href = 'index.html';
        } else {
            alert(result.error || 'Error en el registro');
        }
    } catch (err) {
        alert('Error de red o servidor');
    }
});
    </script>   
</body>
</html>
